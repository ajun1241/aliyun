<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.modcreater.tmbiz.dao.EventMapper" >
    <select id="queryEvent" resultType="com.modcreater.tmbeans.pojo.SingleEvent" parameterType="com.modcreater.tmbeans.vo.QueryEventVo">
        select * from singleevent
         where userId=#{userId}
         <if test="day>0" >
             and day=#{day}
         </if>
        <if test="month>0" >
            and month=#{month}
        </if>
        <if test="year>0" >
            and year=#{year}
        </if>
    </select>

    <insert id="addEvent" parameterType="com.modcreater.tmbeans.pojo.SingleEvent">
        insert into singleevent
            (userId,
            eventName,
            startTime,
            endTime,
            address,
            level,
            flag,
            person,
            remarks,
            repeaTtime,
            isOverdue,
            remindTime,
            day,
            month,
            year)
        values (#{userId}
            ,#{eventName}
            ,#{startTime}
            ,#{endTime}
            ,#{address}
            ,#{level}
            ,#{flag}
            ,#{person}
            ,#{remarks}
            ,#{repeaTtime}
            ,#{isOverdue}
            ,#{remindTime}
            ,#{day}
            ,#{month}
            ,#{year})
    </insert>

    <select id="checkCode" parameterType="String" resultType="int">
        select count(1) from account where userCode=#{userCode}
    </select>
</mapper>